ALTER TABLE ALERTS ADD COLUMN ALERT_TYPE INTEGER;
ALTER TABLE ALERTS ADD COLUMN IS_CAUTION_ENABLED BOOLEAN;
ALTER TABLE ALERTS ADD COLUMN IS_DANGER_ENABLED BOOLEAN;

UPDATE ALERTS SET ALERT_TYPE = CAUTION_ALERT_TYPE WHERE CAUTION_ALERT_TYPE IS NOT NULL AND CAUTION_ALERT_TYPE <> 1003;
UPDATE ALERTS SET ALERT_TYPE = DANGER_ALERT_TYPE  WHERE DANGER_ALERT_TYPE  IS NOT NULL AND DANGER_ALERT_TYPE  <> 1003;
UPDATE ALERTS SET ALERT_TYPE = 1002 WHERE ALERT_TYPE IS NULL;

UPDATE ALERTS SET IS_CAUTION_ENABLED = TRUE WHERE CAUTION_ALERT_TYPE IS NOT NULL AND CAUTION_ALERT_TYPE <> 1003;
UPDATE ALERTS SET IS_CAUTION_ENABLED = FALSE WHERE IS_CAUTION_ENABLED IS NULL;
UPDATE ALERTS SET IS_DANGER_ENABLED  = TRUE WHERE DANGER_ALERT_TYPE  IS NOT NULL AND DANGER_ALERT_TYPE <> 1003;
UPDATE ALERTS SET IS_DANGER_ENABLED = FALSE WHERE IS_DANGER_ENABLED IS NULL;

-- mysql
ALTER TABLE ALERTS MODIFY ALERT_TYPE INTEGER NOT NULL;
ALTER TABLE ALERTS MODIFY IS_CAUTION_ENABLED BOOLEAN NOT NULL;
ALTER TABLE ALERTS MODIFY IS_DANGER_ENABLED BOOLEAN NOT NULL;

-- derby
ALTER TABLE ALERTS ALTER COLUMN ALERT_TYPE NOT NULL;
ALTER TABLE ALERTS ALTER COLUMN IS_CAUTION_ENABLED NOT NULL;
ALTER TABLE ALERTS ALTER COLUMN IS_DANGER_ENABLED NOT NULL;

ALTER TABLE ALERTS DROP COLUMN CAUTION_ALERT_TYPE;
ALTER TABLE ALERTS DROP COLUMN DANGER_ALERT_TYPE;

